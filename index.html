<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Авторизация Patreon</title>
    <script>
      window.onload = () => {
        const hash = new URLSearchParams(window.location.hash.substring(1));
        const token = hash.get("access_token");
        if (!token) {
          document.body.innerText = "Access token не найден в URL.";
          return;
        }

        fetch(`http://localhost:12345/?token=${token}`)
          .then(() => {
            document.body.innerHTML = "<h2>Авторизация прошла успешно.</h2><p>Вы можете вернуться в игру.</p>";
          })
          .catch(() => {
            document.body.innerText = "Не удалось передать токен в игру.";
          });
      };
    </script>
  </head>
  <body>
    <p>Авторизация... Ожидаем ответа.</p>
  </body>
</html>
